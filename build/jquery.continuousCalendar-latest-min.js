$.continuousCalendar={};$.continuousCalendar.version="";$.continuousCalendar.released="2012-10-01";(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{a.DateTime=b(a.jQuery)}})(this,function(a){var b=function(c){if(typeof c=="string"){this.date=new Date(c)}else{this.date=c||new Date()}};a.each(["getTime","getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","getMilliseconds"],function(d,c){b.prototype[c]=function(){return this.date[c]()}});b.prototype.withTime=function(d,c){var e=this.clone();e.date.setHours(d);e.date.setMinutes(c);e.date.setMilliseconds(0);return e};b.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];b.SECOND=1000;b.MINUTE=60*b.SECOND;b.HOUR=60*b.MINUTE;b.DAY=24*b.HOUR;b.WEEK=7*b.DAY;b.now=function(){if(typeof b._now=="undefined"){b._now=new b()}return b._now};b.getDaysInMonth=function(c,d){if(((0==(c%4))&&((0!=(c%100))||(0==(c%400))))&&d==1){return 29}else{return b.DAYS_IN_MONTH[d]}};b.getDayInYear=function(e,f,c){var g=0;for(var d=0;d<f;d++){g+=b.getDaysInMonth(e,d)}g+=c;return g};b.prototype.getDaysInMonth=function(){return b.getDaysInMonth(this.getFullYear(),this.getMonth())};b.prototype.getDayInYear=function(){return b.getDayInYear(this.getFullYear(),this.getMonth(),this.getDate())};b.prototype.plusDays=function(f){var d=this.clone();var c=this.getHours();d.date.setTime(this.getTime()+f*b.DAY);var e=c-d.getHours();if(e!=0){if(e>12){e-=24}if(e<-12){e+=24}d.date.setTime(d.getTime()+(e*b.HOUR))}return d};b.prototype.stripped=function(){return new Date(parseInt(this.getTime()/b.DAY,10))};b.prototype.compareTo=function(d){if(!d){return 1}var c=this.getTime();var e=d.getTime();if(c<e){return -1}else{if(c>e){return 1}else{return 0}}};b.prototype.isToday=function(){return this.equalsOnlyDate(b.now())};b.prototype.getWeekInYear=function(d){if(d!="US"&&d!="ISO"){throw ("Week numbering system must be either US or ISO, was "+d)}var c=new Date(this.getFullYear(),0,1).getDay();if(d=="US"){return Math.ceil((this.getDayInYear()+c)/7)}var g=4;var f=this.getDay();if(f==0){f=7}if(c==0){c=7}if(this.getMonth()==11&&this.getDate()>=29&&(this.getDate()-f)>27){return 1}if(this.getMonth()==0&&this.getDate()<4&&f>g){return new b(new Date(this.getFullYear()-1,11,31)).getWeekInYear("ISO")}var e=Math.ceil((this.getDayInYear()+c-1)/7);if(c>g){e--}return e};b.prototype.clone=function(){return new b(new Date(this.getTime()))};b.prototype.isOddMonth=function(){return this.getMonth()%2!=0};b.prototype.equalsOnlyDate=function(c){if(!c){return false}return this.getMonth()==c.getMonth()&&this.getDate()==c.getDate()&&this.getFullYear()==c.getFullYear()};b.prototype.isBetweenDates=function(d,c){return this.compareTo(d)>=0&&this.compareTo(c)<=0};b.prototype.firstDateOfMonth=function(){return new b((this.getMonth()+1)+"/1/"+this.getFullYear())};b.prototype.lastDateOfMonth=function(){return new b((this.getMonth()+1)+"/"+this.getDaysInMonth()+"/"+this.getFullYear())};b.prototype.distanceInDays=function(c){var e=parseInt(this.getTime()/b.DAY,10);var d=parseInt(c.getTime()/b.DAY,10);return(d-e)};b.prototype.withWeekday=function(c){return this.plusDays(c-this.getDay())};b.prototype.getOnlyDate=function(){return new b(new Date(this.getFullYear(),this.getMonth(),this.getDate()))};b.prototype.getTimezone=function(){return this.date.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};b.prototype.getDayOfYear=function(){var c=0;b.daysInMonth[1]=this.isLeapYear()?29:28;for(var d=0;d<this.getMonth();++d){c+=b.daysInMonth[d]}return c+this.getDate()-1};b.prototype.isLeapYear=function(){var c=this.getFullYear();return((c&3)==0&&(c%100||(c%400==0&&c)))};b.prototype.getDaysInMonth=function(){b.daysInMonth[1]=this.isLeapYear()?29:28;return b.daysInMonth[this.getMonth()]};b.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};b.prototype.isWeekend=function(){return this.getDay()==6||this.getDay()==0};b.prototype.toString=function(){return this.date.toISOString()};b.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];b.y2kYear=50;b.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};return b});(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{a.DateLocale=b()}})(this,function(){var a={};a.MONDAY=1;a.FRIDAY=5;a.SUNDAY=0;a.hoursAndMinutes=function(b,c){return(Math.round((b+c/60)*100)/100).toString()};a.FI={id:"FI",monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDayNames:["su","ma","ti","ke","to","pe","la"],yearsLabel:function(b){return b+" "+(b=="1"?"vuosi":"vuotta")},monthsLabel:function(b){return b+" "+(b=="1"?"kuukausi":"kuukautta")},daysLabel:function(b){return b+" "+(b=="1"?"päivä":"päivää")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d).replace(".",",");return b+" "+(b=="1"?"tunti":"tuntia")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:a.MONDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.MONDAY)}};a.EN={id:"EN",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearsLabel:function(b){return b+" "+(b=="1"?"Year":"Years")},monthsLabel:function(b){return b+" "+(b=="1"?"Months":"Months")},daysLabel:function(b){return b+" "+(b=="1"?"Day":"Days")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d);return b+" "+(b=="1"?"Hour":"Hours")},shortDateFormat:"n/j/Y",weekDateFormat:"D n/j/Y",dateTimeFormat:"D n/j/Y G:i",firstWeekday:a.SUNDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.SUNDAY)}};a.AU={id:"AU",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearsLabel:function(b){return b+" "+(b=="1"?"Year":"Years")},monthsLabel:function(b){return b+" "+(b=="1"?"Months":"Months")},daysLabel:function(b){return b+" "+(b=="1"?"Day":"Days")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d);return b+" "+(b=="1"?"Hour":"Hours")},shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:a.SUNDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.SUNDAY)}};a.DEFAULT=a.EN;a.getFirstDateOfWeek=function(b,c){if(c<b.getDay()){return b.plusDays(c-b.getDay())}else{if(c>b.getDay()){return b.plusDays(c-b.getDay()-7)}else{return b.clone()}}};a.fromArgument=function(b){if(typeof b=="string"){return a[b]}else{return b||a.DEFAULT}};return a});(function(a,b){if(typeof define==="function"&&define.amd){define(["./DateTime"],b)}else{a.DateFormat=b(a.DateTime)}})(this,function(DateTime){var DateFormat={};DateFormat.parseFunctions={count:0};DateFormat.parseRegexes=[];DateFormat.formatFunctions={count:0};DateFormat.format=function(dateTime,format,locale){if(DateFormat.formatFunctions[format]==null){DateFormat.createNewFormat(dateTime,format,locale)}var func=DateFormat.formatFunctions[format];return dateTime[func]()};DateFormat.shortDateFormat=function(dateTime,locale){return DateFormat.format(dateTime,locale?locale.shortDateFormat:"n/j/Y",locale)};DateFormat.formatRange=function(dateRange,locale){if(dateRange._hasTimes){return locale.daysLabel(dateRange.days())+" "+locale.hoursLabel(dateRange.hours(),dateRange.minutes())}else{return DateFormat.shortDateFormat(dateRange.start,locale)+" - "+DateFormat.shortDateFormat(dateRange.end,locale)}};DateFormat.formatDefiningRangeDuration=function(dateRange,locale){var years=parseInt(dateRange.days()/360,10);if(years>0){return locale.yearsLabel(years)}var months=parseInt(dateRange.days()/30,10);if(months>0){return locale.monthsLabel(months)}return locale.daysLabel(dateRange.days())};DateFormat.getWeekOfYear=function(dateTime){var now=dateTime.getDayOfYear()+(4-dateTime.getDay());var jan1=new Date(dateTime.getFullYear(),0,1);var then=(7-jan1.getDay()+4);document.write(then);return DateFormat.leftPad(((now-then)/7)+1,2,"0")};DateFormat.getGMTOffset=function(dateTime){return(dateTime.date.getTimezoneOffset()>0?"-":"+")+DateFormat.leftPad(Math.floor(dateTime.getTimezoneOffset()/60),2,"0")+DateFormat.leftPad(dateTime.getTimezoneOffset()%60,2,"0")};DateFormat.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" "}while(result.length<size){result=ch+result}return result};DateFormat.escape=function(string){return string.replace(/('|\\)/g,"\\$1")};DateFormat.parse=function(input,locale){if(input=="today"){return DateTime.now()}var date=new Date(input);if(isNaN(date.getTime())){throw Error('Could not parse date from "'+input+'"')}return new DateTime(date,locale)};DateFormat.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",FiShortDatePattern:"j.n.Y",FiWeekdayDatePattern:"D j.n.Y",FiWeekdayDateTimePattern:"D j.n.Y k\\lo G:i",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};DateFormat.parseTime=function(timeStr){var splittedTime=splitTime(timeStr.replace(/:|,/i,"."));var time=[parseInt(splittedTime[0],10),parseInt(splittedTime[1],10)];return(isHour(time[0])&&isMinute(time[1]))?time:null;function splitTime(timeStr){if(timeStr.indexOf(".")!=-1){return timeStr.split(".")}switch(timeStr.length){case 4:return[timeStr.slice(0,2),timeStr.slice(2,4)];case 3:return[timeStr.slice(0,1),timeStr.slice(1,3)];case 2:return[timeStr,0];default:return[-1,-1]}}function isMinute(minutes){return !isNaN(minutes)&&minutes>=0&&minutes<=59}function isHour(hours){return !isNaN(hours)&&hours>=0&&hours<=23}};DateFormat.createNewFormat=function(dateTime,format,locale){var funcName="format"+DateFormat.formatFunctions.count++;DateFormat.formatFunctions[format]=funcName;var code="DateTime.prototype."+funcName+" = function(){return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+DateFormat.escape(ch)+"' + "}else{code+=DateFormat.getFormatCode(ch,locale)}}}eval(code.substring(0,code.length-3)+";}")};DateFormat.getFormatCode=function(character){switch(character){case"d":return"DateFormat.leftPad(this.getDate(), 2, '0') + ";case"D":return"locale.shortDayNames[this.getDay()] + ";case"j":return"this.getDate() + ";case"l":return"locale.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"DateFormat.getWeekOfYear(this) + ";case"F":return"locale.monthNames[this.getMonth()] + ";case"m":return"DateFormat.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"locale.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"DateFormat.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"DateFormat.leftPad(this.getHours(), 2, '0') + ";case"i":return"DateFormat.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"DateFormat.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"DateFormat.getGMTOffset(this) + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+DateFormat.escape(character)+"' + "}};return DateFormat});(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","./DateTime","./DateFormat"],b)}else{a.DateRange=b(a.jQuery,a.DateTime,a.DateFormat)}})(this,function(b,c,a){function d(f,e){if(!f||!e){throw ("two dates must be specified, date1="+f+", date2="+e)}this.start=(f.compareTo(e)>0?e:f);this.end=(f.compareTo(e)>0?f:e);this._days=0;this._hours=0;this._minutes=0;this._valid=true}d.prototype={_setDaysHoursAndMinutes:function(){if(this._hasTimes){var e=parseInt((this.end.getTime()-this.start.getTime()));this._days=parseInt(e/c.DAY);e=e-(this._days*c.DAY);this._hours=parseInt(e/c.HOUR);e=e-(this._hours*c.HOUR);this._minutes=parseInt(e/c.MINUTE)}},_dateWithTime:function(e,f){return e.withTime(f[0],f[1])},hours:function(){return this._hours},minutes:function(){return this._minutes},hasDate:function(e){return e.isBetweenDates(this.start,this.end)},isValid:function(){return this._valid&&this.end.getTime()-this.start.getTime()>=0},days:function(){if(this._hasTimes){return this._days}else{return Math.round(this.start.distanceInDays(this.end)+1)}},shiftDays:function(e){return new d(this.start.plusDays(e),this.end.plusDays(e))},expandTo:function(f){var e=this.start.clone();var g=this.end.clone();if(f.compareTo(this.start)<0){e=f}else{if(f.compareTo(this.end)>0){g=f}}return new d(e,g)},expandDaysTo:function(e){return new d(this.start,this.start.plusDays(e-1))},hasValidSize:function(e){return e<0||this.days()>=e},hasValidSizeAndEndsOnWorkWeek:function(e){return this.hasValidSize(e)&&this.hasEndsOnWeekend()},and:function(e){var g=this.start.compareTo(e.start)>0?this.start:e.start;var f=this.end.compareTo(e.end)>0?e.end:this.end;if(g.compareTo(f)<0){return new d(g,f)}else{return d.emptyRange()}},isInside:function(e){return this.start.compareTo(e.start)>=0&&this.end.compareTo(e.end)<=0},hasEndsOnWeekend:function(){return this.start.isWeekend()||this.end.isWeekend()},withTimes:function(i,h){var g=a.parseTime(i);var e=a.parseTime(h);var f=this.clone();if(g&&e){f._valid=true;f._hasTimes=true;f.start=this._dateWithTime(this.start,g);f.end=this._dateWithTime(this.end,e);f._setDaysHoursAndMinutes()}else{f._valid=false}return f},clone:function(){return new d(this.start,this.end)},toString:function(){return["DateRange:",this.start.toString(),"-",this.end.toString(),this._days,"days",this._hours,"hours",this._minutes,"minutes",this._valid?"valid":"invalid"].join(" ")},isPermittedRange:function(g,e,f){return this.hasValidSize(g)&&(!(e&&this.hasEndsOnWeekend()))&&this.isInside(f)},shiftInside:function(f){if(this.days()>f.days()){return d.emptyRange()}var g=this.start.distanceInDays(f.start);var e=this.end.distanceInDays(f.end);if(g>0){return this.shiftDays(g)}if(e<0){return this.shiftDays(e)}return this}};d=b.extend(d,{emptyRange:function(){function e(){this.start=null;this.end=null;this.days=function(){return 0};this.shiftDays=b.noop;this.hasDate=function(){return false};this.clone=function(){return d.emptyRange()}}return new e()},rangeWithMinimumSize:function(k,j,f,i){if(g()){var e=k.expandDaysTo(j);if(f&&e.hasEndsOnWeekend()){var h=e.shiftDays(l(e.end.getDay())).shiftInside(i);while(!h.isPermittedRange(j,f,i)||h.end.compareTo(i.end)>0){if(!h.isPermittedRange(j,false,i)){return d.emptyRange()}h=h.shiftDays(1)}e=h}if(!e.isPermittedRange(j,false,i)){return d.emptyRange()}return e}return k;function g(){return j&&k.days()<=j}function l(m){return -((m+1)%7+1)}}});return d});(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","./DateFormat","./DateLocale","./DateRange","./DateTime"],function(d,c,g,f,e){b(d,c,g,f,e)})}else{b(a.jQuery,a.DateFormat,a.DateLocale,a.DateRange,a.DateTime)}})(this,function(b,a,e,d,c){b.fn.continuousCalendar=function(f){return this.each(function(){g.call(b(this),f)});function g(ab){b(this).addClass("continuousCalendarContainer").append("&nbsp;");var T={weeksBefore:26,weeksAfter:26,firstDate:null,lastDate:null,startField:b("input.startDate",this),endField:b("input.endDate",this),isPopup:false,selectToday:false,locale:e.DEFAULT,disableWeekends:false,disabledDates:null,minimumRange:-1,selectWeek:false,fadeOutDuration:0,callback:b.noop};var ar=b.extend({},T,ab);ar.locale=e.fromArgument(ar.locale);var K={CREATE_OR_RESIZE:"create",MOVE:"move",NONE:"none"};var aB=t(ar.startField);var ag=t(ar.endField);var U=c.now();if(ar.selectToday){var k=G(U);aB=U;ag=U;p(k);ai(k)}var S=ar.locale.getFirstDateOfWeek(aB||U);var aj=this,al=[],aE=[],au={},j=null,N,W,aC,l,H,L=K.NONE,J,i,Z=true,I,q;ax();function ax(){q=b.extend(an(ar.isPopup),av(ae()));aC=aB&&ag?new d(aB,ag,ar.locale):d.emptyRange(ar.locale);l=aC.clone();var aI=ar.firstDate?a.parse(ar.firstDate,ar.locale):S.plusDays(-(ar.weeksBefore*7));var aH=ar.lastDate?a.parse(ar.lastDate,ar.locale):S.plusDays(ar.weeksAfter*7+6);ar.disabledDates=ar.disabledDates?ap(ar.disabledDates):{};ar.fadeOutDuration=parseInt(ar.fadeOutDuration,10);H=new d(aI,aH,ar.locale);J=y();J.click(function(aJ){aJ.stopPropagation()});if(b(".startDateLabel",aj).isEmpty()){aw(aj,q)}q.initUI();q.showInitialSelection();q.performTrigger()}function af(){if(i){return}var aH=b("<table>").addClass("calendarHeader").append(aA());I=b("<table>").addClass("calendarBody").append(aF());i=b("<div>").addClass("calendarScrollContent").append(I);J.append(aH).append(i);al=b("td.date",aj).get();q.initState();q.addRangeLengthLabel();s();W=b("th.month",aH);D();q.initEvents();if(!ar.isPopup){w();R()}}function D(){var aH=false;i.scroll(function(){aH=true});setInterval(function(){if(aH){aH=false;w()}},250)}function ap(aI){var aH={};b.each(aI.split(" "),function(aK,aJ){aH[a.parse(aJ).date]=true});return aH}function av(aJ){var aH={showInitialSelection:A,initEvents:function(){Q(aj,I);at()},addRangeLengthLabel:function(){if(b(".rangeLengthLabel",aj).isEmpty()){var aK=b('<div class="label"><span class="rangeLengthLabel"></span></div>');b(".continuousCalendar",aj).append(aK)}},addEndDateLabel:function(aK){aK.append('<span class="separator"> - </span>').append('<span class="endDateLabel"></span>')},performTrigger:function(){aj.data("calendarRange",aC);aD(aC)}};var aI={showInitialSelection:function(){if(ar.startField.val()){o(a.format(a.parse(ar.startField.val()),ar.locale.weekDateFormat,ar.locale))}},initEvents:function(){aq();var aK=aB&&a.format(aB,"Ymd",ar.locale);if(aK in au){P(au[aK]).addClass("selected")}},addRangeLengthLabel:b.noop,addEndDateLabel:b.noop,performTrigger:function(){aj.data("calendarRange",aB);aD(aB)}};return aJ?aH:aI}function an(aH){var aJ={initUI:function(){J.addClass("popup").hide();var aK=b('<a href="#" class="calendarIcon">'+U.getDate()+"</a>").click(E);aj.prepend("<div></div>");aj.prepend(aK)},initState:b.noop,getContainer:function(aK){return b("<div>").addClass("popUpContainer").append(aK)},close:function(aK){E.call(aK)},addDateLabelBehaviour:function(aK){aK.addClass("clickable");aK.click(E)}};var aI={initUI:af,initState:B,getContainer:function(aK){return aK},close:b.noop,addDateLabelBehaviour:b.noop};return aH?aJ:aI}function s(){var aH=a.format(U,"Ymd",ar.locale);if(aH in au){P(au[aH]).addClass("today").wrapInner("<div>")}}function y(){var aH=b(".continuousCalendar",aj);if(aH.exists()){return aH}else{var aI=b("<div>").addClass("continuousCalendar");aj.append(q.getContainer(aI));return aI}}function aw(aH,aJ){var aI=b('<div class="label"><span class="startDateLabel"></span></div>');aJ.addEndDateLabel(aI);aH.prepend(aI);aJ.addDateLabelBehaviour(aI.children())}function Q(aI,aH){b("span.rangeLengthLabel",aI).text(ar.locale.daysLabel(aC.days()));aH.addClass(ar.selectWeek?"weekRange":"freeRange");aH.mousedown(C).mouseover(am).mouseup(z);aG(aH.get(0))}function R(){var aH=b(".selected, .today",i).get(0);if(aH){i.scrollTop(aH.offsetTop-(i.height()-aH.offsetHeight)/2)}}function w(){var aH=b(".calendarScrollContent",aj).get(0);var aK=b("table",aH).get(0);var aI=parseInt(aH.scrollTop/N);var aJ=h(aK.rows[aI].cells[2]);W.text(aJ.getFullYear())}function aA(){var aI=b("<tr>").append(aH());aI.append(b('<th class="week">&nbsp;</th>'));b(ar.locale.dayNames).each(function(aK){var aJ=b("<th>").append(ar.locale.dayNames[(aK+ar.locale.firstWeekday)%7].substr(0,2)).addClass("weekDay");aI.append(aJ)});return b("<thead>").append(aI);function aH(){return b("<th>").addClass("month").append(S.getFullYear())}}function B(){O();R()}function O(){N=parseInt(I.height()/b("tr",I).size())}function E(){af();if(J.is(":visible")){J.fadeOut(ar.fadeOutDuration);b(document).unbind("click.continuousCalendar")}else{J.show();if(Z){O();w();Z=false}R();b(document).bind("click.continuousCalendar",E)}return false}function aF(){var aI=ar.locale.getFirstDateOfWeek(H.start);var aH=true;var aJ=[];while(aI.compareTo(H.end)<=0){X(aJ,aI.clone(),aH);aH=false;aI=aI.plusDays(7)}return"<tbody>"+aJ.join("")+"</tbody>"}function X(aL,aI,aH){aL.push("<tr>");aL.push(x(aI,aH));aL.push(ad(aI));for(var aK=0;aK<7;aK++){var aJ=aI.plusDays(aK);aL.push(az(aJ))}aL.push("</tr>")}function az(aH){var aI='<td class="'+F(aH)+'" date-cell-index="'+aE.length+'">'+aH.getDate()+"</td>";au[a.format(aH,"Ymd",ar.locale)]=aE.length;aE.push(aH);return aI}function x(aI,aH){var aJ='<th class="month '+ah(aI);if(aH||aI.getDate()<=7){aJ+=' monthName">';aJ+=ar.locale.monthNames[aI.getMonth()]}else{aJ+='">';if(aI.getDate()<=7*2&&aI.getMonth()==0){aJ+=aI.getFullYear()}}return aJ+"</th>"}function ad(aH){return'<th class="week '+ah(aH)+'">'+aH.getWeekInYear("ISO")+"</th>"}function F(aH){return b.trim(["date",ah(aH),r(aH),u(aH),ak(aH)].sort().join(" "))}function ah(aH){return aH.isOddMonth()?"odd":""}function r(aH){var aI=ar.disableWeekends&&aH.isWeekend();var aJ=ar.disabledDates[aH.getOnlyDate().date];var aK=!H.hasDate(aH);return aK||aI||aJ?"disabled":""}function u(aH){return aH.isToday()?"today":""}function ak(aH){return aH.getDay()==0?"holiday":""}function aq(){b(".date",aj).bind("click",function(){var aI=b(this);if(aI.hasClass("disabled")){return}b("td.selected",aj).removeClass("selected");aI.addClass("selected");var aH=h(aI.get(0));ar.startField.val(a.shortDateFormat(aH,ar.locale));o(a.format(aH,ar.locale.weekDateFormat,ar.locale));q.close(this);aD(aH)})}function ac(){aC=new d(j,j,ar.locale)}function C(aL){var aK=aL.target;if(aM(aL)){aC=aJ(aL);return}L=K.CREATE_OR_RESIZE;j=h(aK);if(j.equalsOnlyDate(aC.end)){j=aC.start;return}if(j.equalsOnlyDate(aC.start)){j=aC.end;return}if(aC.hasDate(j)){L=K.MOVE;return}if(aI(aK)){ac()}function aI(aN){return M(aN)&&ao(aN)}function aM(aN){if(ar.selectWeek){return aI(aN.target)||n(aN.target)}else{return n(aN.target)||Y(aN.target)||aN.shiftKey}}function aJ(aQ){var aP=aQ.target;if((ar.selectWeek&&aI(aP))||n(aP)){L=K.NONE;var aN=h(b(aP).parent().children(".date").get(0));return aH(aN)}else{if(Y(aP)){L=K.NONE;var aO=h(b(aP).siblings(".date").get(0));return new d(aO.firstDateOfMonth(),aO.lastDateOfMonth(),ar.locale)}else{if(aQ.shiftKey){if(aC.days()>0&&aI(aP)){L=K.NONE;aC=aC.expandTo(h(aP));return aC}}}}return aC}function aH(aO){var aN=aO;var aP=aO.plusDays(6);if(ar.disableWeekends){aN=aO.withWeekday(e.MONDAY);aP=aO.withWeekday(e.FRIDAY)}return new d(aN,aP,ar.locale).and(H)}}function am(aI){if(L==K.NONE){return}var aH=h(aI.target);({move:function(){var aJ=j.distanceInDays(aH);var aK=aC.shiftDays(aJ).and(H);if(v(aK)){j=aH;aC=aK}},create:function(){var aJ=new d(j,aH,ar.locale);if(ao(aI.target)&&v(aJ)){aC=aJ}}})[L]();at()}function v(aH){return aH.isPermittedRange(ar.minimumRange,ar.disableWeekends,H)}function z(){L=K.NONE;at();ay()}function at(){aC=d.rangeWithMinimumSize(aC,ar.minimumRange,ar.disableWeekends,H);aa(aC);b("span.rangeLengthLabel",aj).text(ar.locale.daysLabel(aC.days()))}function aa(aH){b("td.selected",aj).removeClass("selected").removeClass("rangeStart").removeClass("rangeEnd");V(aH);l=aH.clone()}function V(aH){if(aH.days()==0){return}var aK=au[a.format(aH.start,"Ymd",ar.locale)];var aJ=au[a.format(aH.end,"Ymd",ar.locale)];for(var aI=aK;aI<=aJ;aI++){m(aI,aH.start,aH.end)}}function m(aK,aM,aH){var aJ=aE[aK];var aL=P(aK).get(0);var aI=[F(aJ)];if(aJ.equalsOnlyDate(aH)){aI.push("selected rangeEnd")}else{if(aJ.equalsOnlyDate(aM)){aI.push("selected rangeStart")}else{if(aJ.isBetweenDates(aM,aH)){aI.push("selected")}}}aL.className=aI.join(" ")}function ay(){var aI=G(aC.start);var aH=G(aC.end);aj.data("calendarRange",aC);p(aI);ai(aH);A();if(ar.selectWeek){q.close(b("td.selected",aj).first())}aD(aC)}function A(){if(aC.start&&aC.end){var aH=ar.locale.weekDateFormat;b("span.startDateLabel",aj).text(a.format(aC.start,aH,ar.locale));b("span.endDateLabel",aj).text(a.format(aC.end,aH,ar.locale));b("span.separator",aj).show()}else{b("span.separator",aj).hide()}}function t(aH){return aH.length>0&&aH.val().length>0?a.parse(aH.val()):null}function aG(aH){if(b.browser.mozilla){b(aH).css("MozUserSelect","none")}else{if(b.browser.msie){b(aH).bind("selectstart",function(){return false})}else{b(aH).mousedown(function(){return false})}}}function aD(aH){ar.callback.call(aj,aH);aj.trigger("calendarChange",aH)}function M(aH){return b(aH).closest("[date-cell-index]").hasClass("date")}function n(aH){return b(aH).hasClass("week")}function Y(aH){return b(aH).hasClass("month")}function ao(aH){return !b(aH).hasClass("disabled")}function h(aH){return aE[b(aH).closest("[date-cell-index]").attr("date-cell-index")]}function P(aH){return b(al[aH])}function p(aH){ar.startField.val(aH)}function ai(aH){ar.endField.val(aH)}function G(aH){return a.shortDateFormat(aH,ar.locale)}function o(aH){b("span.startDateLabel",aj).text(aH)}function ae(){return ar.endField&&ar.endField.length>0}}};b.fn.calendarRange=function(){return b(this).data("calendarRange")};b.fn.exists=function(){return this.length>0};b.fn.isEmpty=function(){return this.length==0}});