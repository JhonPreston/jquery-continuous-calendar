/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * Tiny Scrollbar 1.66
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 13 / 11 / 2011
 * Depends on library: jQuery
 * 
 */

var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("../lib/almond",function(){}),define("jquery",[],function(){return window.jQuery}),define("DateTime",["jquery"],function(e){function n(e){var t=e.split("-");return{year:+t[0],month:+t[1],day:+t[2]}}function r(e){if(e){var t=e.split(":");return{hours:+t[0],minutes:+t[1],seconds:+t[2]||0}}return{hours:0,minutes:0}}var t=function(e,t,n,r,i,s){function o(e,t,n,r,i,s){r=r||0,i=i||0,s=s||0;var o=new Date(e,t-1,n,r,i,s,0);if(o.toString()=="Invalid Date"||t!=o.getMonth()+1||e!=o.getFullYear()||n!=o.getDate()||r!=o.getHours()||i!=o.getMinutes()||s!=o.getSeconds())throw Error("Invalid Date: "+e+"-"+t+"-"+n+" "+r+":"+i+":"+s);return o}if(arguments.length==0)this.date=new Date;else if(e instanceof Date)this.date=new Date(e.getTime());else if(typeof e=="string")this.date=new Date(e);else{if(typeof e!="number")throw Error("None of supported parameters was used for constructor: "+Array.prototype.slice.call(arguments).join(", "));this.date=o(+e,+t,+n,+r,+i,+s)}};return t.SUNDAY=0,t.MONDAY=1,t.TUESDAY=2,t.WEDNESDAY=3,t.THURSDAY=4,t.FRIDAY=5,t.SATURDAY=6,e.each(["getTime","getFullYear","getDate","getDay","getHours","getMinutes","getSeconds","getMilliseconds"],function(e,n){t.prototype[n]=function(){return this.date[n]()}}),t.fromDateTime=function(e,n,r,i,s){return new t(e,n,r,i,s)},t.fromDate=function(e,n,r){return t.fromDateTime(e,n,r,0,0)},t.fromDateObject=function(e){return t.fromMillis(e.getTime())},t.prototype.toISOString=function(){function t(e){return e<10?"0"+e:""+e}return e.map([this.getFullYear(),this.getMonth(),this.getDate()],t).join("-")+"T"+e.map([this.getHours(),this.getMinutes(),this.getSeconds()],t).join(":")},t.prototype.getMonth=function(){return this.date.getMonth()+1},t.fromIsoDate=function(e){var r=/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z?))?$/;if(!r.test(e))throw Error(e+" is not valid ISO Date (YYYY-MM-DD or YYYY-MM-DDTHH:MM)");var i=n(e.split("T")[0]);return t.fromDate(i.year,i.month,i.day)},t.fromIsoDateTime=function(e){var i=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z?)/;if(!i.test(e))throw Error(e+" is not valid ISO Date (YYYY-MM-DDTHH:MM)");var s=e.split("T"),o=r(s.length==2&&s[1]),u=n(s[0]);return new t(u.year,u.month,u.day,o.hours,o.minutes,o.seconds)},t.prototype.withResetMS=function(){var e=this.clone();return e.date.setMilliseconds(0),e},t.prototype.withTime=function(e,t){if(typeof e=="string"){var n=e.split(":");e=n[0],t=n[1]}var r=this.clone();return r.date.setHours(e),r.date.setMinutes(t),r.date.setSeconds(0),r.date.setMilliseconds(0),r},t.SECOND=1e3,t.MINUTE=60*t.SECOND,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.WEEK=7*t.DAY,t.now=function(){return typeof t._now=="undefined"&&(t._now=new t),t._now},t.getDaysInMonth=function(e,n){if(n>12||n<1)throw new Error("Month must be between 1-12");var r=e*12+n;return t.fromDate(Math.floor(r/12),r%12+1,1).minusDays(1).getDate()},t.getDayInYear=function(e,n,r){return t.fromDate(e,1,1).distanceInDays(t.fromDate(e,n,r))+1},t.prototype.getDaysInMonth=function(){return t.getDaysInMonth(this.getFullYear(),this.getMonth())},t.prototype.getDayInYear=function(){return t.getDayInYear(this.getFullYear(),this.getMonth(),this.getDate())},t.prototype.plusDays=function(e){var n=this.clone(),r=this.getHours();n.date.setTime(this.getTime()+e*t.DAY);var i=r-n.getHours();return i!=0&&(i>12&&(i-=24),i<-12&&(i+=24),n.date.setTime(n.getTime()+i*t.HOUR)),n},t.prototype.minusDays=function(e){return this.plusDays(-e)},t.prototype.compareTo=function(e){if(!e)return 1;var t=this.getTime(),n=e.getTime();return t<n?-1:t>n?1:0},t.prototype.isToday=function(){return this.equalsOnlyDate(t.now())},t.prototype.getWeekInYear=function(e){if(e!="US"&&e!="ISO")throw"Week numbering system must be either US or ISO, was "+e;var n=(new Date(this.getFullYear(),0,1)).getDay();if(e=="US")return Math.ceil((this.getDayInYear()+n)/7);var r=4,i=this.getDay();i==0&&(i=7),n==0&&(n=7);if(this.getMonth()==12&&this.getDate()>=29&&this.getDate()-i>27)return 1;if(this.getMonth()==1&&this.getDate()<4&&i>r)return(new t(new Date(this.getFullYear()-1,11,31))).getWeekInYear("ISO");var s=Math.ceil((this.getDayInYear()+n-1)/7);return n>r&&s--,s},t.prototype.clone=function(){return new t(this.date)},t.fromMillis=function(e){return new t(new Date(e))},t.prototype.isOddMonth=function(){return this.getMonth()%2==0},t.prototype.equalsOnlyDate=function(e){return e?this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getFullYear()==e.getFullYear():!1},t.prototype.isBetweenDates=function(e,t){if(e.getTime()>t.getTime())throw Error("start date can't be after end date");return this.compareTo(e)>=0&&this.compareTo(t)<=0},t.prototype.firstDateOfMonth=function(){return t.fromDate(this.getFullYear(),this.getMonth(),1)},t.prototype.lastDateOfMonth=function(){return t.fromDate(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},t.prototype.distanceInDays=function(e){var n=parseInt(this.getTime()/t.DAY,10),r=parseInt(e.getTime()/t.DAY,10);return r-n},t.prototype.withWeekday=function(e){return this.plusDays(e-this.getDay())},t.prototype.getOnlyDate=function(){return t.fromDate(this.getFullYear(),this.getMonth(),this.getDate())},t.prototype.isWeekend=function(){return this.getDay()==6||this.getDay()==0},t.prototype.toString=function(){return this.toISOString()},t.prototype.getFirstDateOfWeek=function(e){var n=e?e.firstWeekday:t.MONDAY;return n<this.getDay()?this.plusDays(n-this.getDay()):n>this.getDay()?this.plusDays(n-this.getDay()-7):this.clone()},t.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],t.y2kYear=50,t.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},t}),define("DateFormat",["./DateTime"],function(DateTime){var DateFormat={};return DateFormat.parseFunctions={count:0},DateFormat.parseRegexes=[],DateFormat.formatFunctions={count:0},DateFormat.hoursAndMinutes=function(e,t){return(Math.round((e+t/60)*100)/100).toString()},DateFormat.format=function(e,t,n){DateFormat.formatFunctions[t]==null&&DateFormat.createNewFormat(e,t,n);var r=DateFormat.formatFunctions[t];return e[r]()},DateFormat.shortDateFormat=function(e,t){return DateFormat.format(e,t?t.shortDateFormat:"n/j/Y",t)},DateFormat.formatRange=function(e,t){return e._hasTimes?t.daysLabel(e.days())+" "+t.hoursLabel(e.hours(),e.minutes()):DateFormat.shortDateFormat(e.start,t)+" - "+DateFormat.shortDateFormat(e.end,t)},DateFormat.formatDefiningRangeDuration=function(e,t){var n=parseInt(e.days()/360,10);if(n>0)return t.yearsLabel(n);var r=parseInt(e.days()/30,10);return r>0?t.monthsLabel(r):t.daysLabel(e.days())},DateFormat.getGMTOffset=function(e){return(e.date.getTimezoneOffset()>0?"-":"+")+DateFormat.leftPad(Math.floor(e.getTimezoneOffset()/60),2,"0")+DateFormat.leftPad(e.getTimezoneOffset()%60,2,"0")},DateFormat.leftPad=function(e,t,n){var r=String(e);n==null&&(n=" ");while(r.length<t)r=n+r;return r},DateFormat.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},DateFormat.parse=function(e){if(e=="today")return DateTime.now();var t=new Date(e);if(isNaN(t.getTime()))throw Error('Could not parse date from "'+e+'"');return new DateTime(t)},DateFormat.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",FiShortDatePattern:"j.n.Y",FiWeekdayDatePattern:"D j.n.Y",FiWeekdayDateTimePattern:"D j.n.Y k\\lo G:i",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},DateFormat.parseTime=function(e){function r(e){if(e.indexOf(".")!=-1)return e.split(".");switch(e.length){case 4:return[e.slice(0,2),e.slice(2,4)];case 3:return[e.slice(0,1),e.slice(1,3)];case 2:return[e,0];default:return[-1,-1]}}function i(e){return!isNaN(e)&&e>=0&&e<=59}function s(e){return!isNaN(e)&&e>=0&&e<=23}var t=r(e.replace(/:|,/i,".")),n=[+t[0],+t[1]];return s(n[0])&&i(n[1])?n:null},DateFormat.createNewFormat=function(dateTime,format,locale){var funcName="format"+DateFormat.formatFunctions.count++;DateFormat.formatFunctions[format]=funcName;var code="DateTime.prototype."+funcName+" = function(){return ",special=!1,ch="";for(var i=0;i<format.length;++i)ch=format.charAt(i),!special&&ch=="\\"?special=!0:special?(special=!1,code+="'"+DateFormat.escape(ch)+"' + "):code+=DateFormat.getFormatCode(ch,locale);eval(code.substring(0,code.length-3)+";}")},DateFormat.getFormatCode=function(e){switch(e){case"d":return"DateFormat.leftPad(this.getDate(), 2, '0') + ";case"D":return"locale.shortDayNames[this.getDay()] + ";case"j":return"this.getDate() + ";case"l":return"locale.dayNames[this.getDay()] + ";case"w":return"this.getDay() + ";case"z":return"this.getDayInYear() + ";case"F":return"locale.monthNames[this.getMonth()-1] + ";case"m":return"DateFormat.leftPad(this.getMonth(), 2, '0') + ";case"M":return"locale.monthNames[this.getMonth()-1].substring(0, 3) + ";case"n":return"(this.getMonth()) + ";case"t":return"this.getDaysInMonth() + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"DateFormat.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"DateFormat.leftPad(this.getHours(), 2, '0') + ";case"i":return"DateFormat.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"DateFormat.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"DateFormat.getGMTOffset(this) + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+DateFormat.escape(e)+"' + "}},DateFormat}),define("DateLocale",["./DateTime","./DateFormat"],function(e,t){var n={FI:{id:"FI",monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDayNames:["su","ma","ti","ke","to","pe","la"],yearsLabel:function(e){return e+" "+(e=="1"?"vuosi":"vuotta")},monthsLabel:function(e){return e+" "+(e=="1"?"kuukausi":"kuukautta")},daysLabel:function(e){return e+" "+(e=="1"?"päivä":"päivää")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n).replace(".",",");return r+" "+(r=="1"?"tunti":"tuntia")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:e.MONDAY},EN:{id:"EN",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],yearsLabel:function(e){return e+" "+(e=="1"?"Year":"Years")},monthsLabel:function(e){return e+" "+(e=="1"?"Months":"Months")},daysLabel:function(e){return e+" "+(e=="1"?"Day":"Days")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n);return r+" "+(r=="1"?"Hour":"Hours")},shortDateFormat:"n/j/Y",weekDateFormat:"D n/j/Y",dateTimeFormat:"D n/j/Y G:i",firstWeekday:e.SUNDAY},AU:{id:"AU",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],yearsLabel:function(e){return e+" "+(e=="1"?"Year":"Years")},monthsLabel:function(e){return e+" "+(e=="1"?"Months":"Months")},daysLabel:function(e){return e+" "+(e=="1"?"Day":"Days")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n);return r+" "+(r=="1"?"Hour":"Hours")},shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:e.SUNDAY},ET:{id:"ET",monthNames:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayNames:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"],shortDayNames:["P","E","T","K","N","R","L"],yearsLabel:function(e){return e+" "+(e=="1"?"Aasta":"Aastat")},monthsLabel:function(e){return e+" "+(e=="1"?"Kuu":"Kuud")},daysLabel:function(e){return e+" "+(e=="1"?"Päev":"Päeva")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n).replace(".",",");return r+" "+(r=="1"?"Tund":"Tundi")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\l G:i",firstWeekday:e.MONDAY},RU:{id:"RU",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],yearsLabel:function(e){return e+" "+(e=="1"?"Год":"Года")},monthsLabel:function(e){return e+" "+(e=="1"?"Месяц":"Месяца")},daysLabel:function(e){return e+" "+(e=="1"?"День":"Дня")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n).replace(".",",");return r+" "+(r=="1"?"Минута":"Минуты")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:e.MONDAY},SV:{id:"SV",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDayNames:["Sö","Må","Ti","On","To","Fr","Lö"],yearsLabel:function(e){return e+" "+(e=="1"?"År":"År")},monthsLabel:function(e){return e+" "+(e=="1"?"Månad":"Månader")},daysLabel:function(e){return e+" "+(e=="1"?"Dag":"Dagar")},hoursLabel:function(e,n){var r=t.hoursAndMinutes(e,n).replace(".",",");return r+" "+(r=="1"?"Minut":"Minuter")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:e.MONDAY}};return n.fromArgument=function(e){return typeof e=="string"?n[e.toUpperCase()]:e},n}),define("DateRange",["jquery","./DateTime","./DateFormat"],function(e,t,n){function r(e,t){if(!e||!t)throw"two dates must be specified, date1="+e+", date2="+t;this.start=e.compareTo(t)>0?t:e,this.end=e.compareTo(t)>0?e:t,this._days=0,this._hours=0,this._minutes=0,this._valid=!0}return r.prototype={_setDaysHoursAndMinutes:function(){if(this._hasTimes){var e=parseInt(this.end.getTime()-this.start.getTime(),10);this._days=parseInt(e/t.DAY,10),e-=this._days*t.DAY,this._hours=parseInt(e/t.HOUR,10),e-=this._hours*t.HOUR,this._minutes=parseInt(e/t.MINUTE,10)}},_dateWithTime:function(e,t){return e.withTime(t[0],t[1])},hours:function(){return this._hours},minutes:function(){return this._minutes},hasDate:function(e){return e.isBetweenDates(this.start,this.end)},isValid:function(){return this._valid&&this.end.getTime()-this.start.getTime()>=0},days:function(){return this._hasTimes?this._days:Math.round(this.start.distanceInDays(this.end)+1)},shiftDays:function(e){return new r(this.start.plusDays(e),this.end.plusDays(e))},expandTo:function(e){var t=this.start.clone(),n=this.end.clone();return e.compareTo(this.start)<0?t=e:e.compareTo(this.end)>0&&(n=e),new r(t,n)},expandDaysTo:function(e){return new r(this.start,this.start.plusDays(e-1))},hasValidSize:function(e){return e<0||this.days()>=e},hasValidSizeAndEndsOnWorkWeek:function(e){return this.hasValidSize(e)&&this.hasEndsOnWeekend()},and:function(e){var t=this.start.compareTo(e.start)>0?this.start:e.start,n=this.end.compareTo(e.end)>0?e.end:this.end;return t.compareTo(n)<0?new r(t,n):r.emptyRange()},isInside:function(e){return this.start.compareTo(e.start)>=0&&this.end.compareTo(e.end)<=0},hasEndsOnWeekend:function(){return this.start.isWeekend()||this.end.isWeekend()},withTimes:function(e,t){var r=n.parseTime(e),i=n.parseTime(t),s=this.clone();return r&&i?(s._valid=!0,s._hasTimes=!0,s.start=this._dateWithTime(this.start,r),s.end=this._dateWithTime(this.end,i),s._setDaysHoursAndMinutes()):s._valid=!1,s},clone:function(){return new r(this.start,this.end)},toString:function(){return["DateRange:",this.start.toString(),"-",this.end.toString(),this._days,"days",this._hours,"hours",this._minutes,"minutes",this._valid?"valid":"invalid"].join(" ")},isPermittedRange:function(e,t,n){return this.hasValidSize(e)&&(!t||!this.hasEndsOnWeekend())&&this.isInside(n)},shiftInside:function(e){if(this.days()>e.days())return r.emptyRange();var t=this.start.distanceInDays(e.start),n=this.end.distanceInDays(e.end);return t>0?this.shiftDays(t):n<0?this.shiftDays(n):this}},r=e.extend(r,{emptyRange:function(){function t(){this.start=null,this.end=null,this.days=function(){return 0},this.shiftDays=e.noop,this.hasDate=function(){return!1},this.clone=function(){return r.emptyRange()},this.expandDaysTo=function(){return this},this.hasEndsOnWeekend=function(){return!1},this.isPermittedRange=function(){return!0}}return new t},rangeWithMinimumSize:function(e,t,n,i){function u(){return t&&e.days()<=t}function a(e){return-((e+1)%7+1)}if(u()){var s=e.expandDaysTo(t);if(n&&s.hasEndsOnWeekend()){var o=s.shiftDays(a(s.end.getDay())).shiftInside(i);while(!o.isPermittedRange(t,n,i)||o.end.compareTo(i.end)>0){if(!o.isPermittedRange(t,!1,i))return r.emptyRange();o=o.shiftDays(1)}s=o}return s.isPermittedRange(t,!1,i)?s:r.emptyRange()}return e}}),r}),define("CalendarBody",["jquery","./DateFormat","./DateLocale","./DateRange","./DateTime"],function(e,t,n,r,i){return function(n,r,s,o,u,a){function m(){var t=e('<tr><th class="month"></th><th class="week">&nbsp;</th>');return e(s.dayNames).each(function(n){var r=e("<th>").append(s.shortDayNames[(n+s.firstWeekday)%7]).addClass("weekDay");t.append(r)}),e("<thead>").append(t)}function g(e){var n=t.format(i.now(),"Ymd",s);n in e&&T(e[n]).addClass("today").wrapInner("<div>")}function y(){function o(e,t,n){e.push("<tr>"),e.push(a(t,n)),e.push(c(t));for(var r=0;r<7;r++){var i=t.plusDays(r);e.push(u(i))}e.push("</tr>")}function u(e){var n='<td class="'+b(e)+'" date-cell-index="'+l.length+'">'+e.getDate()+"</td>";return f[t.format(e,"Ymd",s)]=l.length,l.push(e),n}function a(e,t){var n='<th class="month '+w(e);return t||e.getDate()<=7?(n+=' monthName">',n+=s.monthNames[e.getMonth()-1]):(n+='">',e.getDate()<=14&&e.getMonth()==1&&(n+=e.getFullYear())),n+"</th>"}function c(e){return'<th class="week '+w(e)+'">'+e.getWeekInYear("ISO")+"</th>"}var e=r.start.getFirstDateOfWeek(s),n=!0,i=[];while(e.compareTo(r.end)<=0)o(i,e.clone(),n),n=!1,e=e.plusDays(7);return"<tbody>"+i.join("")+"</tbody>"}function b(t){return e.trim(["date",w(t),E(t),S(t),x(t)].sort().join(" "))}function w(e){return e.isOddMonth()?"odd":""}function E(e){var t=u&&e.isWeekend(),n=a[e.getOnlyDate().date],i=!r.hasDate(e);return i||t||n?"disabled":""}function S(e){return e.isToday()?"today":""}function x(e){return e.getDay()==0?"holiday":""}function T(t){return e(d[t])}var f={},l=[],c=e('<table class="calendarHeader">').append(m()),h=e('<table class="calendarBody">').append(y()),p=e('<div class="calendarScrollContent">').append(h);n.append(c),o?(h.addClass("overview"),p.addClass("viewport"),n.append(e('<div class="tinyscrollbar"></div>').append('<div class="scrollbar"> <div class="track"> <div class="thumb"> <div class="end"></div> </div> </div> </div>').append(p))):n.append(p);var d=e("td.date",n).get();g(f);var v=e("th.month",c);return{bodyTable:h,scrollContent:p,dateCells:d,yearTitle:v,dateCellMap:f,dateCellDates:l,dateStyles:b,getDateCell:T}}}),define("RangeEvents",["jquery","./DateFormat","./DateLocale","./DateRange","./DateTime"],function(e,t,n,r,i){return function(n,s,o,u,a,f,l,c,h,p,d,v,m,g){function x(){b=v&&m?new r(v,m,u):r.emptyRange(u)}function T(t,n){e("span.rangeLengthLabel",t).text(u.daysLabel(b.days())),n.addClass(a.selectWeek?"weekRange":"freeRange"),n.mousedown(N).mouseover(L).mouseup(O),k(n.get(0))}function N(t){function o(e){return F(e)&&R(e)}function c(e,t){return a.selectWeek?o(e)||I(e):I(e)||q(e)||t}function h(t,n){if(a.selectWeek&&o(t)||I(t)){S=E.NONE;var i=f(e(t).parent().children(".date").get(0));return p(i)}if(q(t)){S=E.NONE;var s=f(e(t).siblings(".date").get(0));return new r(s.firstDateOfMonth(),s.lastDateOfMonth(),u)}return n&&b.days()>0&&o(t)?(S=E.NONE,b=b.expandTo(f(t)),b):b}function p(e){var t=e,n=e.plusDays(6);return a.disableWeekends&&(t=e.withWeekday(i.MONDAY),n=e.withWeekday(i.FRIDAY)),(new r(t,n,u)).and(l)}var n=t.target,s=t.shiftKey;if(c(n,s)){b=h(n,s);return}S=E.CREATE_OR_RESIZE,y=f(n);if(y.equalsOnlyDate(b.end)){y=b.start;return}if(y.equalsOnlyDate(b.start)){y=b.end;return}if(b.hasDate(y)){S=E.MOVE;return}o(n)&&C()}function C(){b=new r(y,y,u)}function k(t){e(t).css("MozUserSelect","none"),e(t).bind("selectstart",function(){return!1}),e(t).mousedown(function(){return!1})}function L(e){if(S==E.NONE)return;var t=f(e.target),n={move:function(){var e=y.distanceInDays(t),n=b.shiftDays(e).and(l);A(n)&&(y=t,b=n)},create:function(){var n=new r(y,t,u);R(e.target)&&A(n)&&(b=n)}};n[S](),_()}function A(e){return e.isPermittedRange(a.minimumRange,a.disableWeekends,l)}function O(){S=E.NONE,M()&&(b=r.emptyRange()),_(),B()}function M(){for(var e=0;e<g.length;e++)if(b.hasDate(new i(g[e])))return!0;return!1}function _(){b=r.rangeWithMinimumSize(b,a.minimumRange,a.disableWeekends,l),D(b),e("span.rangeLengthLabel",n).text(u.daysLabel(b.days()))}function D(t){e("td.selected",n).removeClass("selected").removeClass("rangeStart").removeClass("rangeEnd").removeClass("invalidSelection"),P(t),w=t.clone()}function P(r){function f(e){return s.dateCellMap[t.format(e,"Ymd",u)]}if(r.days()==0)return;var i=f(r.start),o=f(r.end);for(var a=i;a<=o;a++)s.getDateCell(a).get(0).className=H(s.dateCellDates[a],r.start,r.end).join(" ");M()&&e("td.selected",n).addClass("invalidSelection")}function H(e,t,n){var r=[s.dateStyles(e)];return e.equalsOnlyDate(n)?r.concat("selected rangeEnd"):e.equalsOnlyDate(t)?r.concat("selected rangeStart"):e.isBetweenDates(t,n)?r.concat("selected"):r}function B(){M()&&(b=r.emptyRange(),setTimeout(function(){D(b)},200));var t=d(b.start),i=d(b.end);n.data("calendarRange",b),c(t),h(i),j(),a.selectWeek&&p.close(e("td.selected",n).first()),o(b)}function j(){b||x();if(b.start&&b.end){var r=u.weekDateFormat;e("span.startDateLabel",n).text(t.format(b.start,r,u)),e("span.endDateLabel",n).text(t.format(b.end,r,u)),e("span.separator",n).show()}else e("span.separator",n).hide()}function F(t){return e(t).closest("[date-cell-index]").hasClass("date")}function I(t){return e(t).hasClass("week")}function q(t){return e(t).hasClass("month")}function R(t){return!e(t).hasClass("disabled")}var y=null,b,w,E={CREATE_OR_RESIZE:"create",MOVE:"move",NONE:"none"},S=E.NONE;return{showInitialSelection:j,initEvents:function(){x(),w=b.clone(),T(n,s.bodyTable),_()},addRangeLengthLabel:function(){if(e(".rangeLengthLabel",n).isEmpty()){var t=e('<div class="label"><span class="rangeLengthLabel"></span></div>');e(".continuousCalendar",n).append(t)}},addEndDateLabel:function(e){e.append('<span class="separator"> - </span>').append('<span class="endDateLabel"></span>')},performTrigger:function(){n.data("calendarRange",b),o(b)}}}}),function(e){function t(t,n){function m(){return r.update(),y(),r}function g(){f.obj.css(c,p/u.ratio),o.obj.css(c,-p),v.start=f.obj.offset()[c];var e=h.toLowerCase();u.obj.css(e,a[n.axis]),a.obj.css(e,a[n.axis]),f.obj.css(e,f[n.axis])}function y(){f.obj.bind("mousedown",b),f.obj[0].ontouchstart=function(e){return e.preventDefault(),f.obj.unbind("mousedown"),b(e.touches[0]),!1},a.obj.bind("mouseup",S),n.scroll&&this.addEventListener?(i[0].addEventListener("DOMMouseScroll",w,!1),i[0].addEventListener("mousewheel",w,!1)):n.scroll&&(i[0].onmousewheel=w)}function b(t){v.start=l?t.pageX:t.pageY;var n=parseInt(f.obj.css(c),10);return d.start=n=="auto"?0:n,e(document).bind("mousemove",S),document.ontouchmove=function(t){e(document).unbind("mousemove"),S(t.touches[0])},e(document).bind("mouseup",E),f.obj.bind("mouseup",E),f.obj[0].ontouchend=document.ontouchend=function(t){e(document).unbind("mouseup"),f.obj.unbind("mouseup"),E(t.touches[0])},!1}function w(t){if(!(o.ratio>=1)){i.trigger("scroll"),t=t||window.event;var r=t.wheelDelta?t.wheelDelta/120:-t.detail/3;p-=r*n.wheel,p=Math.min(o[n.axis]-s[n.axis],Math.max(0,p)),f.obj.css(c,p/u.ratio),o.obj.css(c,-p),t=e.event.fix(t),t.preventDefault()}}function E(){return e(document).unbind("mousemove",S),e(document).unbind("mouseup",E),f.obj.unbind("mouseup",E),document.ontouchmove=f.obj[0].ontouchend=document.ontouchend=null,!1}function S(e){return i.trigger("scroll"),o.ratio>=1||(d.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,d.start+((l?e.pageX:e.pageY)-v.start))),p=d.now*u.ratio,o.obj.css(c,-p),f.obj.css(c,d.now)),!1}var r=this,i=t,s={obj:e(".viewport",t)},o={obj:e(".overview",t)},u={obj:e(".scrollbar",t)},a={obj:e(".track",u.obj)},f={obj:e(".thumb",u.obj)},l=n.axis=="x",c=l?"left":"top",h=l?"Width":"Height",p,d={start:0,now:0},v={};return this.update=function(e){var t=n.axis;s[t]=s.obj[0]["offset"+h],o[t]=o.obj[0]["scroll"+h];var r=o[t],i=s[t];o.ratio=i/r,u.obj.toggleClass("disable",o.ratio>=1),a[t]=n.size=="auto"?i:n.size;var l=a[t];f[t]=Math.min(l,Math.max(0,n.sizethumb=="auto"?l*o.ratio:n.sizethumb));var c=f[t];u.ratio=n.sizethumb=="auto"?r/l:(r-i)/(l-c),p=e=="relative"&&o.ratio<=1?Math.min(r-i,Math.max(0,p)):0,p=e=="bottom"&&o.ratio<=1?r-i:isNaN(parseInt(e,10))?p:parseInt(e,10),g()},m()}e.tiny=e.tiny||{},e.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,size:"auto",sizethumb:"auto"}},e.fn.tinyscrollbar=function(n){var n=e.extend({},e.tiny.scrollbar.options,n);return this.each(function(){e(this).data("tsb",new t(e(this),n))}),this},e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}}(jQuery),define("jquery.tinyscrollbar",function(){}),define("jquery.continuousCalendar",["jquery","./DateFormat","./DateLocale","./DateRange","./DateTime","./CalendarBody","./RangeEvents","jquery.tinyscrollbar"],function(e,t,n,r,i,s,o){e.continuousCalendar={version:"3.0.0",released:"2013-05-22"},e.fn.continuousCalendar=function(u){function a(u){function C(){T=f.disabledDates?f.disabledDates.split(" "):[],N=f.disabledDates?M(T):{},x=A(f),b=D(f.isPopup),w=_(J()),f.fadeOutDuration=+f.fadeOutDuration,g=P(),g.click(function(e){e.stopPropagation()}),e(".startDateLabel",v).isEmpty()&&H(v,b,w),b.initUI(),w.showInitialSelection(),w.performTrigger()}function k(){f.customScroll&&(E=e(".tinyscrollbar",v).tinyscrollbar())}function L(){if(S.scrollContent)return;S=e.extend(S,s(g,x,l,f.customScroll,f.disableWeekends,N)),O(),b.initState(),w.addRangeLengthLabel(),w.initEvents(),B()}function A(e){var n=(c||i.now()).getFirstDateOfWeek(l),s=e.firstDate,o=e.lastDate,u=s?t.parse(s,l):n.minusDays(e.weeksBefore*7),a=o?t.parse(o,l):n.plusDays(e.weeksAfter*7+6);return new r(u,a)}function O(){if(f.customScroll)E||k(),E.bind("scroll",j);else{var e=!1;S.scrollContent.scroll(function(){e=!0}),setInterval(function(){e&&(e=!1,j())},250)}}function M(n){var r={};return e.each(n,function(e,n){r[t.parse(n).date]=!0}),r}function _(n){function i(){e(".date",v).bind("click",function(){var n=e(this);if(n.hasClass("disabled"))return;e("td.selected",v).removeClass("selected"),n.addClass("selected");var r=z(n.get(0));f.startField.val(t.shortDateFormat(r,l)),s(t.format(r,l.weekDateFormat,l)),b.close(this),U(r)})}function s(t){e("span.startDateLabel",v).text(t)}var r={showInitialSelection:function(){c&&s(t.format(c,l.weekDateFormat,l))},initEvents:function(){i();var e=c&&t.format(c,"Ymd",l);e in S.dateCellMap&&S.getDateCell(S.dateCellMap[e]).addClass("selected")},addRangeLengthLabel:e.noop,addEndDateLabel:e.noop,performTrigger:function(){v.data("calendarRange",c),U(c)}};return n?o(v,S,U,l,f,z,x,W,X,b,V,c,h,T):r}function D(t){var n={initUI:function(){g.addClass("popup").hide();var t=e('<a href="#" class="calendarIcon">'+p.getDate()+"</a>").click(q);v.prepend("<div></div>"),v.prepend(t)},initState:e.noop,getContainer:function(t){return e('<div class="popUpContainer">').append(t)},close:function(e){q.call(e)},addDateLabelBehaviour:function(e){e.addClass("clickable"),e.click(q)}},r={initUI:L,initState:F,getContainer:function(e){return e},close:e.noop,addDateLabelBehaviour:e.noop};return t?n:r}function P(){var t=e(".continuousCalendar",v);if(t.exists())return t;var n=e('<div class="continuousCalendar">');return v.append(b.getContainer(n)),n}function H(t,n,r){var i=e('<div class="label"><span class="startDateLabel"></span></div>');r.addEndDateLabel(i),t.prepend(i),n.addDateLabelBehaviour(i.children())}function B(){var t=e(".selected",S.scrollContent).get(0)||e(".today",S.scrollContent).get(0);if(t){var n=t.offsetTop-(S.scrollContent.height()-t.offsetHeight)/2;if(f.customScroll){var r=S.bodyTable.height(),i=r-S.scrollContent.height(),s=n>i?i:n;E.tinyscrollbar_update(s>0?s:0)}else S.scrollContent.scrollTop(n)}}function j(){var t=S.scrollContent.get(0),n=e("table",t).get(0),r=f.customScroll?-e(".overview",g).position().top:t.scrollTop,i=parseInt(r/m,10),s=z(n.rows[i].cells[2]);S.yearTitle.text(s.getFullYear())}function F(){k(),I(),j()}function I(){m=parseInt(S.bodyTable.height()/e("tr",S.bodyTable).size(),10)}function q(){return L(),g.is(":visible")?(g.fadeOut(f.fadeOutDuration),e(document).unbind("click.continuousCalendar")):(g.show(),y&&(k(),I(),j(),y=!1),B(),e(document).bind("click.continuousCalendar",q)),!1}function R(e){return e.length>0&&e.val().length>0?t.parse(e.val()):null}function U(e){f.callback.call(v,e),v.trigger("calendarChange",e)}function z(t){return S.dateCellDates[e(t).closest("[date-cell-index]").attr("date-cell-index")]}function W(e){f.startField.val(e)}function X(e){f.endField.val(e)}function V(e){return e?t.shortDateFormat(e,l):""}function J(){return f.endField&&f.endField.length>0}var a={weeksBefore:26,weeksAfter:26,firstDate:null,lastDate:null,startField:e("input.startDate",this),endField:e("input.endDate",this),isPopup:!1,selectToday:!1,locale:n.EN,disableWeekends:!1,disabledDates:null,minimumRange:-1,selectWeek:!1,fadeOutDuration:0,callback:e.noop,customScroll:!1,theme:""},f=e.extend({},a,u),l=n.fromArgument(f.locale),c=R(f.startField),h=R(f.endField),p=i.now();if(f.selectToday){var d=V(p);c=p,h=p,W(d),X(d)}var v=this,m,g,y=!0,b,w,E,S={},x,T,N;e(this).addClass("continuousCalendarContainer").addClass(f.theme).append("&nbsp;"),C()}return this.each(function(){a.call(e(this),u)})},e.fn.calendarRange=function(){return e(this).data("calendarRange")},e.fn.exists=function(){return this.length>0},e.fn.isEmpty=function(){return this.length==0}}),require(["jquery.continuousCalendar"]),window.DateFormat=require("DateFormat"),window.DateLocale=require("DateLocale"),window.DateTime=require("DateTime"),window.CalendarBody=require("CalendarBody"),window.RangeEvents=require("RangeEvents");